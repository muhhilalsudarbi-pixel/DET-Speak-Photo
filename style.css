:root{
  --grey:#e4e4e4; --grey-2:#bdbdbd; --text:#3c3c3c;
  --success:#2ec748; --danger:#e74c3c; --warn:#f39c12;
  --primary:#4c82f7; --bg:#fafafa; --radius:16px;
}

*{box-sizing:border-box}
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family:"Fredoka",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  display:grid; place-items:center; min-height:100vh;
  -webkit-tap-highlight-color: transparent;
}

.app{
  width:min(980px,92vw); background:#fff; border:1px solid var(--grey);
  border-radius:20px; box-shadow:0 12px 30px rgba(0,0,0,.06);
  overflow:hidden; margin:20px 0 40px;
}

header{display:flex;align-items:center;gap:14px;padding:18px 22px;border-bottom:1px solid var(--grey)}
header .logo{width:42px;height:42px;display:grid;place-items:center;border-radius:12px;background:#e9f2ff;color:var(--primary);font-weight:700}
header h1{font-size:20px;font-weight:700;margin:0}
header .sub{margin-left:auto;font-size:13px;color:#6b7280}

.toolbar{display:grid;grid-template-columns:1fr auto;gap:14px;padding:14px 22px;align-items:center;border-bottom:1px solid var(--grey)}
.controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.badge{font-size:12px;padding:6px 10px;border-radius:999px;background:#eef2ff;color:#3442ad;border:1px solid #dbe3ff}

select,button,.ghost{
  font-family:inherit;font-size:14px;padding:10px 14px;border-radius:12px;border:1px solid var(--grey);background:#fff;
  transition:transform .12s ease, box-shadow .2s ease, border-color .2s ease, background-color .2s ease, opacity .2s ease;
}
select{min-width:220px; cursor:pointer}
button{cursor:pointer}
.ghost{border-style:dashed;color:#64748b}

button.primary{background:var(--success);border-color:#27aa3d;color:#fff;box-shadow:0 3px 0 #27aa3d}
button.warn{background:#ffe8c2;border-color:#ffd28a;color:#8a4b00}

button:hover, select:hover{transform:translateY(-1px); box-shadow:0 6px 18px rgba(0,0,0,.08)}
button.ghost:hover{background:#f9fafb}
button:active{transform:translateY(0) scale(.98); box-shadow:0 2px 8px rgba(0,0,0,.06)}
button:focus-visible, select:focus-visible{outline:3px solid #c7d2fe; outline-offset:2px; border-color:#c7d2fe}
button:disabled{opacity:.6;cursor:not-allowed;box-shadow:none;transform:none}

/* Toggle (checkbox-like button) */
.toggle{
  display:flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--grey);border-radius:12px;background:#fff;font-size:14px;line-height:1;cursor:pointer;
  transition:background-color .2s ease, border-color .2s ease, transform .12s ease;
}
.toggle:hover{transform:translateY(-1px)}
.toggle input{
  appearance:none; -webkit-appearance:none; outline:none; width:18px;height:18px;border-radius:6px;border:2px solid #9aa3b2;display:grid;place-items:center;
  transition:background-color .2s ease,border-color .2s ease;
  accent-color: var(--primary); /* fallback untuk browser yang support */
}
.toggle input:checked{background:var(--primary);border-color:var(--primary)}
.toggle input:checked::after{content:"âœ“";font-size:12px;color:#fff;transform:translateY(-1px)}

.timer{margin-left:auto;display:flex;align-items:center;gap:10px;font-weight:600}
.timer .count{width:70px;text-align:center;padding:8px 10px;border:1px solid var(--grey);border-radius:10px}

.progressbar{position:relative;height:9px;background:#eef2ff;border-radius:999px;overflow:hidden}
.progressbar>i{
  position:absolute;left:0;top:0;bottom:0;width:0%;
  background:linear-gradient(90deg,#7aa4ff,#4c82f7);
  transition:width .35s ease;
  will-change: width; /* smoother on low-end devices */
}

.task{padding:20px 22px 10px;display:grid;gap:12px;border-bottom:1px solid var(--grey)}
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.pill{background:#f3f4f6;border:1px solid #e5e7eb;padding:6px 10px;border-radius:12px;font-size:12px}

.panel{
  border:1px solid var(--grey);border-radius:14px;padding:12px;background:#fbfbfb;
  animation:fadeIn .2s ease both;
}
@keyframes fadeIn{from{opacity:0; transform:translateY(2px)} to{opacity:1; transform:none}}

.muted{color:#6b7280}

/* Karaoke / diff area */
.karaoke{
  font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
  background:#fff;border:1px dashed var(--grey);border-radius:12px;padding:12px;min-height:44px;overflow-x:auto
}
.word{display:inline-block;margin:0 2px;padding:2px 4px;border-radius:6px}
.word.ok{background:#eaf9ef}
.word.bad{background:#ffe9e7;text-decoration:underline wavy var(--danger)}
.word.miss{background:#fff5d3;color:#8a4b00}
.word.extra{background:#f1f5f9;color:#475569}

.statgrid{display:grid;grid-template-columns:repeat(4,minmax(90px,1fr));gap:10px}
.stat{border:1px solid var(--grey);border-radius:12px;padding:10px;background:#fff;text-align:center; transition:transform .12s ease}
.stat:hover{transform:translateY(-1px)}
.stat .h{font-size:12px;color:#6b7280}
.stat .v{font-size:18px;font-weight:700}

.help{padding:0 22px 18px}
details{border:1px dashed var(--grey);border-radius:12px;padding:10px 12px;background:#fcfcff; transition:box-shadow .2s}
details[open]{box-shadow:inset 0 0 0 1px #e5e7eb}
summary{cursor:pointer;font-weight:600;margin:6px 0}

.guide-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:12px}
.guide-card{border:1px dashed var(--grey);border-radius:12px;padding:10px;background:#fcfcff; transition:transform .12s ease}
.guide-card:hover{transform:translateY(-2px)}
.guide-card h4{margin:0 0 6px;font-size:14px}
.guide-card ul{margin:0;padding-left:18px}

.custom-grid{display:grid;grid-template-columns:1fr;gap:10px}
.custom-grid .row5{display:grid;grid-template-columns:repeat(5,1fr);gap:10px}
.custom-grid input[type="text"], .custom-grid textarea{
  width:100%;border:1px solid var(--grey);border-radius:10px;padding:10px;font-size:14px;background:#fff; transition:border-color .2s
}
.custom-grid input[type="text"]:focus, .custom-grid textarea:focus{border-color:#c7d2fe; outline:none}
.custom-list{display:grid;gap:6px}
.custom-item{display:flex;align-items:center;gap:8px;padding:8px 10px;border:1px dashed var(--grey);border-radius:10px;background:#fff}

footer{padding:12px 22px 18px;border-top:1px solid var(--grey);display:flex;align-items:center;justify-content:space-between}

@media(max-width:900px){.guide-grid{grid-template-columns:1fr}}
@media(max-width:720px){.statgrid{grid-template-columns:repeat(2,1fr)}}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce){
  *{transition:none !important; animation:none !important}
}
